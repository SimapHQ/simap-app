<simap-help-header size="h3" label="'Edit Item'" help-block="helpBlock"></simap-help-header>

<simap-help-header size="h4" label="'Information'" help-block="infoHelpBlock"></simap-help-header>

<div class="col-xs-12">
  <div class="form-group">
    <label for="item-name">Name</label>
    <input type="text" class="form-control" id="item-name" ng-model="name" placeholder="Name"/>
  </div>
  <div class="form-group">
    <label for="new-item-category">Category</label>
    <select id="new-item-category" class="form-control">
      <option>Vegetables</option>
      <option>Meats and Proteins</option>
      <option>Household Items</option>
    </select>
  </div>
  <div class="form-group">
    <label for="item-color">Color</label>
    <div colorpicker colorpicker-position="bottom" class="form-control square" ng-model="color" ng-style="{ 'background-color': color }" href=""></div>
  </div>
</div>

<simap-help-header size="h4" label="'Item Units'" help-block="unitsHelpBlock"></simap-help-header>
<div class="form-group">
  <div class="col-xs-12">
    <label>Add Units</label>
  </div>
  <div class="col-xs-12">
    <form ng-submit="addUnit()">
      <input type="text" class="form-control" ng-model="newUnitName" placeholder="Unit Name"/>
      <input type="submit" ng-hide="true"/>
    </form>
  </div>
</div>
<span class="spacer"></span>
<div ng-repeat="(key, value) in units" class="clearfix">
  <div ng-hide="editing">
    <div class="col-xs-10">
      <p class="hpad-10 vpad-2">
        <a ng-click="editing=!editing">{{value.name}}</a>
      </p>
    </div>
    <div class="col-xs-2">
      <a ng-click="removeUnit(key)">
        <span class="glyphicon glyphicon-trash"></span>
      </a>
    </div>
  </div>
  <div ng-show="editing">
    <div class="col-xs-12 form-group">
      <form ng-submit="editing=!editing">
        <input type="text" class="form-control" ng-model="value.name"/>
        <input type="submit" ng-hide="true"/>
      </form>
    </div>
  </div>
</div>

<div class="col-xs-12">
  <div class="form-group">
    <label for="master-unit">Select Primary Unit</label>
    <select id="master-unit" class="form-control" ng-model="masterUnit" ng-options="unit.name for (id, unit) in units">
    </select>
  </div>
</div>

<div ng-show="masterUnit">
  <div class="col-xs-12">
    <div class="form-group">
      <label>Define Unit Conversions</label>
    </div>
  </div>
  <div ng-repeat="unit in units | simapExclude:'name':masterUnit" class="clearfix form-group">
    <div class="col-xs-4 text-right vpad-6 nowrap">
      <span>1 {{masterUnit.name}} =</span>
    </div>
    <div class="col-xs-4">
      <input type="number" class="form-control">
    </div>
    <div class="col-xs-4 vpad-6 nowrap">
      <span>{{unit.name}}s</span>
    </div>
  </div>
</div>

<simap-help-header size="h4" label="'Planning'" help-block="planningHelpBlock"></simap-help-header>
<div class="col-xs-12">
  <div class="form-group">
    <label for="planning-type">Select Planning Type</label>
    <select id="planning-type" class="form-control" ng-model="planningType">
      <option value="rationed">Rationed</option>
      <option value="baseline">Baseline</option>
    </select>
  </div>
</div>

<div ng-show="planningType === 'rationed'">
  <div class="col-xs-12">
    <label>Adults</label>
  </div>
  <div class="col-xs-4 form-group">
    <input type="number" class="form-control" ng-model="adultRationAmount">  
  </div>
  <div class="col-xs-4 form-group">
    <select class="form-control" ng-model="adultRationUnit" ng-options="unit.name for (id, unit) in units">
    </select>
  </div>
  <div class="col-xs-4 form-group">
    <select class="form-control" ng-model="adultRationInterval">
      <option value="day">Day</option>
      <option value="week">Week</option>
      <option value="month">Month</option>
      <option value="year">Year</option>
    </select>
  </div>
  <div class="col-xs-12">
    <label>Children</label>
  </div>
  <div class="col-xs-4 form-group">
    <input type="number" class="form-control" ng-model="childRationAmount">  
  </div>
  <div class="col-xs-4 form-group">
    <select class="form-control" ng-model="childRationUnit" ng-options="unit.name for (id, unit) in units">
    </select>
  </div>
  <div class="col-xs-4 form-group">
    <select class="form-control" ng-model="childRationInterval">
      <option value="day">Day</option>
      <option value="week">Week</option>
      <option value="month">Month</option>
      <option value="year">Year</option>
    </select>
  </div>
</div>

<div ng-show="planningType === 'baseline'">
  <div class="col-xs-12">
    <label>Define Baseline</label>
  </div>
  <div class="col-xs-6 form-group">
    <input type="number" class="form-control" ng-model="baselineAmount">
  </div>
  <div class="col-xs-6 form-group">
    <select class="form-control" ng-model="baselineUnits" ng-options="unit.name for (id, unit) in units">
    </select>
  </div>
</div>
  
<simap-save-button on-save="save()"></simap-save-button>
